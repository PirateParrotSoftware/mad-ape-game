<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test</title>
    <label id=".account">"Not connected"</label>
    <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
    <link rel="stylesheet" href="login.css">
    <div class="loginBox" id="connectPopup">
        <div class="loginContent">
            <div class="loginButtonsContainer">
                <div class="loginButtonContainer">
                    <button onclick="connect()">Connect wallet</button>
                </div>
                <div class="loginButtonContainer">
                    <button onclick="connect()">Connect wallet</button>
                </div>
                <div class="loginButtonContainer">
                    <button onclick="connect()">Connect wallet</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const MMSDK = new MetaMaskSDK.MetaMaskSDK(
            {
                dappMetadata: {
                    name: "Example JavaScript Dapp",
                    url: window.location.host,
                    useDeeplink: true,
                }
            });
            
        async function connect() {
            console.log("Start logging process");

            let result = await ethereum
                .request({
                    method: 'eth_requestAccounts',
                    params: [],
                    });

            document.getElementById(".account").innerText = result;

            console.log("Connected");

            let chainResult = await ethereum
                    .request({
                        method: 'wallet_addEthereumChain',
                        params: [
                        {
                            chainId: '0x89',
                            chainName: "Matic Mainnet",
                            nativeCurrency: {
                            name: "MATIC",
                            symbol: "MATIC",
                            decimals: 18
                            },
                            blockExplorerUrls: ['https://polygonscan.com'],
                            nativeCurrency: { symbol: 'MATIC', decimals: 18 },
                            rpcUrls: ['https://polygon-rpc.com/'],
                        },
                        ],
                    });

            console.log("Chain added");
        }

        function showConnectPopup()
        {
            document.getElementById("connectPopup").style.visibility = "visible";
        }
  </script>
    <button onclick="showConnectPopup()">Open connect popup</button>
  </head>
</html>
